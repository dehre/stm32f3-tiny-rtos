//==================================================================================================
// INCLUDES
//==================================================================================================

#include "user_tasks.h"

#include "instrument_trigger.h"
#include "os.h"

#include "stm32f3xx_hal.h"
#include <stdint.h>

//==================================================================================================
// DEFINES - MACROS
//==================================================================================================

InstrumentTrigger_Create(E, 11);
InstrumentTrigger_Create(E, 12);
InstrumentTrigger_Create(E, 13);

//==================================================================================================
// ENUMS - STRUCTS - TYPEDEFS
//==================================================================================================

//==================================================================================================
// STATIC PROTOTYPES
//==================================================================================================

//==================================================================================================
// STATIC VARIABLES
//==================================================================================================

//==================================================================================================
// GLOBAL FUNCTIONS
//==================================================================================================

void UserTask_0(void)
{
    InstrumentTriggerPE11_Init();
    while (1)
    {
        InstrumentTriggerPE11_Toggle();
        HAL_Delay(60);
    }
}

void UserTask_1(void)
{
    InstrumentTriggerPE12_Init();
    while (1)
    {
        for (uint32_t i = 0; i <= 12; i++)
        {
            InstrumentTriggerPE12_Toggle();
            HAL_Delay(50);
        }
        OS_Suspend();
    }
}

void UserTask_2(void)
{
    InstrumentTriggerPE13_Init();
    uint32_t count = 0;
    while (1)
    {
        InstrumentTriggerPE13_Toggle();
        count++;
        if (count % 35 == 0)
            OS_Sleep(4500);
        else
            HAL_Delay(70);
    }
}

//==================================================================================================
// STATIC FUNCTIONS
//==================================================================================================
